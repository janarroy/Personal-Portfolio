<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bake ‚Äì Jan Arroyo</title>
  <link href="styles.css" rel="stylesheet" />
  <style>
    /* ===== Page foodie background (subtle confetti + cream wash) ===== */
    body::before{
      content:"";
      position:fixed; inset:0; z-index:-2; pointer-events:none;
      background:
        radial-gradient(1200px 500px at 0% -10%, rgba(255,240,215,.55), transparent 60%),
        radial-gradient(1200px 500px at 110% 110%, rgba(210,235,255,.45), transparent 60%);
      opacity:.9;
    }
    body::after{
      content:"";
      position:fixed; inset:-2%; z-index:-1; pointer-events:none;
      /* tiny confetti sprinkles */
      background:
        conic-gradient(from 0deg, #ffd166 0 25%, transparent 25% 100%) 6% 10%/6px 2px repeat,
        conic-gradient(from 0deg, #ef476f 0 25%, transparent 25% 100%) 35% 30%/7px 3px repeat,
        conic-gradient(from 0deg, #06d6a0 0 25%, transparent 25% 100%) 75% 60%/6px 2px repeat,
        conic-gradient(from 0deg, #118ab2 0 25%, transparent 25% 100%) 15% 80%/7px 3px repeat;
      opacity:.06;
      transform: rotate(0.5deg);
    }

    /* ===== Grid: 3 per row (2 / 1 on smaller screens) ===== */
    .rcp-grid{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);}
    @media (max-width:1100px){.rcp-grid{grid-template-columns:repeat(2,1fr);}}
    @media (max-width:640px){.rcp-grid{grid-template-columns:1fr;}}

    /* ===== Cards ===== */
    .rcp-card{border-radius:16px;overflow:hidden;background:#fff;
      border:1px solid rgba(17,19,24,.08);box-shadow:0 6px 24px rgba(17,19,24,.06);
      transition:box-shadow .2s ease, transform .18s ease;}
    .rcp-card:hover{box-shadow:0 10px 28px rgba(17,19,24,.10); transform: translateY(-2px);}
    .rcp-toggle{display:block;width:100%;padding:0;border:0;background:transparent;cursor:pointer;text-align:left;}
    .rcp-photo{position:relative;aspect-ratio:4/3;}
    .rcp-photo img{width:100%;height:100%;object-fit:cover;display:block;}
    .rcp-caption{position:absolute;left:0;right:0;bottom:0;padding:10px 12px;color:#fff;font-weight:700;
      background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));text-shadow:0 1px 2px rgba(0,0,0,.5);}

    /* ===== Lightbox (cream + animated) ===== */
    :root { --modal-ms: 260ms; --easing: cubic-bezier(.2,.7,.2,1); }
    body.no-scroll{overflow:hidden;}

    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(255,248,240,.85);
      backdrop-filter:saturate(1.1) blur(2px);
      opacity:0; pointer-events:none; display:none;
      transition:opacity var(--modal-ms) var(--easing); z-index:60;
    }
    .modal-backdrop.open{display:block; opacity:1; pointer-events:auto;}
    .modal-backdrop.closing{opacity:0;}

    .modal-dialog{ position:fixed; inset:0; z-index:61; display:none; place-items:center; }
    .modal-dialog.visible{ display:grid; }                /* render first */
    .modal-dialog.open .modal-panel{ opacity:1; transform:none; } /* animate in */
    .modal-dialog.closing .modal-panel{ opacity:0; transform: translateY(8px) scale(.985); }

    .modal-panel{
      background:#fffaf0; color:#1f2937;
      border:1px solid rgba(17,19,24,.08);
      border-radius:16px; max-width:920px; width:min(96vw,920px);
      box-shadow:0 20px 60px rgba(0,0,0,.25); overflow:hidden;
      opacity:0; transform: translateY(12px) scale(.98);
      transition: opacity var(--modal-ms) var(--easing), transform var(--modal-ms) var(--easing);
      will-change: opacity, transform;
    }
    .modal-head{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 16px; border-bottom:1px solid rgba(17,19,24,.08);
    }
    .modal-title{font-weight:700;}
    .modal-close{background:transparent;border:0;color:#111;font-size:22px;cursor:pointer;line-height:1;}

    .modal-body{
      padding:16px; display:grid; gap:16px;
      max-height:80vh; overflow:auto;  /* scroll if tall */
    }
    .modal-photos{ display:grid; gap:12px; grid-template-columns:1fr; }
    .modal-photos img{
      width:100%; height:auto; display:block; background:#fff;
      border-radius:12px; object-fit:contain;
    }
    .modal-recipe{ display:grid; gap:16px; grid-template-columns:1fr 1fr; }
    @media (max-width:900px){ .modal-recipe{ grid-template-columns:1fr; } }
    .modal-recipe h4{ margin:0 0 6px; }
    .modal-recipe ul,.modal-recipe ol{ margin:0 0 0 18px; }
    .muted{color:#6b7280;font-size:14px;}

    /* === Podium medal badge (SVG ribbon) === */
    .rcp-medal{
      position:absolute; top:10px; left:10px;
      width:44px; height:44px; z-index:2;
    }
    .rcp-medal svg{
      width:100%; height:100%; display:block;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.25));
    }

    /* ===== Hero intro (fun + personal) ===== */
    .hero {
      position: relative;
      margin: 28px 0 14px;
      padding: 26px 22px 22px;
      border-radius: 18px;
      background:
        radial-gradient(1200px 400px at -10% 0%, rgba(255,214,165,.25), transparent 60%),
        radial-gradient(1200px 400px at 110% 100%, rgba(189,224,254,.25), transparent 60%),
        #fffaf0; /* cream to match the lightbox */
      border: 1px solid rgba(17,19,24,.08);
      box-shadow: 0 10px 40px rgba(17,19,24,.08);
      overflow: hidden;
    }
    .hero::after{
      content:"";
      position:absolute; inset:-30%;
      background: conic-gradient(from 180deg,
        rgba(255,218,185,.35),
        rgba(255,255,204,.25),
        rgba(204,232,255,.35),
        rgba(255,218,185,.35));
      filter: blur(60px);
      opacity:.35;
      animation: heroSpin 18s linear infinite;
    }
    @keyframes heroSpin { from{transform:rotate(0)} to{transform:rotate(360deg)} }

    .hero h1{
      margin: 0 0 6px;
      font-size: clamp(26px, 3.4vw, 38px);
    }
    .hero p{
      margin: 0;
      max-width: 70ch;
      line-height: 1.55;
      font-size: clamp(15px, 1.9vw, 16px);
    }
    .hero-chips{
      display:flex; gap:8px; flex-wrap:wrap; margin-top:12px;
    }
    .hero-chip{
      font-weight: 700; font-size: 12px;
      padding: 6px 10px; border-radius: 999px;
      color:#fff; background:#111; opacity:.92;
      box-shadow: 0 3px 10px rgba(0,0,0,.12);
    }

    /* Snorlax sticker (fun little easter egg) */
    .snorlax{
      position:absolute; right:16px; top:-20px;
      display:flex; align-items:center; gap:8px;
      background:#142d4c; color:#fff; border-radius:999px;
      padding:8px 10px; box-shadow:0 8px 30px rgba(20,45,76,.25);
      transform: translateY(0); animation: bob 3.2s ease-in-out infinite;
    }
    .snorlax .bubble{font-size:18px; line-height:1;}
    .snorlax .tag{font-size:12px; font-weight:800; letter-spacing:.3px; opacity:.95;}
    @keyframes bob { 0%,100%{ transform:translateY(0)} 50%{ transform:translateY(4px)} }
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="./">JAN</a>
      <div class="nav-links">
        <a class="btn" href="work.html">Projects</a>
        <a class="btn" href="races.html">Races</a>
        <a class="btn" href="bake.html">Bake</a>
        <a class="btn" href="travel.html">Travel</a>
        <a class="btn" href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <main class="container work">
    <!-- Hero -->
    <section class="hero" aria-label="About this page">
      <div class="snorlax" aria-hidden="true"><span class="bubble">üò¥</span><span class="tag">snorlax</span></div>
      <h1>Baking for my people</h1>
      <p>
        I‚Äôm a USC senior who likes experimenting in the kitchen and turning raw ingredients into
        something worth a group text. I bake for birthdays, offer letters, midterm wins, and random
        Tuesdays because good food makes days better. Tap a card to see another photo and the recipe.
      </p>
      <div class="hero-chips" aria-label="Top picks">
        <span class="hero-chip">ü•á Lemon Cake</span>
        <span class="hero-chip">ü•à Thumbprint Cookies</span>
        <span class="hero-chip">ü•â Focaccia</span>
        <span class="hero-chip">üçΩÔ∏è always eating</span>
      </div>
    </section>

    <!-- Cards -->
    <section class="rcp-grid" id="rcpGrid"><!-- cards injected by JS --></section>
  </main>

  <footer><div class="container">¬© <span id="y"></span> Jan Arroyo</div></footer>

  <!-- Lightbox -->
  <div class="modal-backdrop" id="rcpBackdrop"></div>
  <div class="modal-dialog" id="rcpDialog" aria-hidden="true">
    <article class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal-head">
        <div>
          <div class="modal-title" id="modalTitle">Recipe</div>
          <div class="muted" id="modalMeta"></div>
        </div>
        <button class="modal-close" id="rcpClose" aria-label="Close">√ó</button>
      </header>
      <div class="modal-body">
        <div class="modal-photos">
          <img id="mImg1" alt="" loading="lazy">
          <img id="mImg2" alt="" loading="lazy">
        </div>
        <div class="modal-recipe">
          <div>
            <h4>Ingredients</h4>
            <ul id="mIngr"></ul>
          </div>
          <div>
            <h4>Steps</h4>
            <ol id="mSteps"></ol>
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // Repo-safe image paths (works at /Personal-Portfolio and locally)
    const BASE = (() => {
      const seg = location.pathname.split('/')[1];
      return seg ? `/${seg}` : '';
    })();
    const p = (name) => `${BASE}/images/${name}`;

    // ===== Recipes =====
    const RECIPES = [
      {
        id:"lemon",
        rank: 1,
        title:"Lemon Cake",
        meta:"Three 8\" layers ‚Ä¢ Cream cheese buttercream",
        img1:p("LemonCake.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong>
            <ul>
              <li>3 cups (354g) AP flour ‚Ä¢ 2¬Ω tsp baking powder</li>
              <li>1/2 tsp baking soda ‚Ä¢ 1/2 tsp salt</li>
              <li>1 cup (226g) butter ‚Ä¢ 1¬æ cups (350g) sugar</li>
              <li>3 eggs ‚Ä¢ 2 tsp vanilla ‚Ä¢ 1 cup (240ml) milk</li>
              <li>1 Tbsp lemon zest ‚Ä¢ 1/3 cup (80ml) lemon juice</li>
            </ul>
          </li>
          <li><strong>Cream Cheese Buttercream</strong>
            <ul>
              <li>1 cup (226g) butter ‚Ä¢ 8 oz (226g) cream cheese</li>
              <li>4¬Ω cups (540g) confectioners‚Äô sugar</li>
              <li>2 Tbsp lemon juice ‚Ä¢ 1 tsp vanilla ‚Ä¢ pinch salt</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Bake the Cake</strong>
            <ol>
              <li>Preheat 350¬∞F. Grease and line three 8\" pans.</li>
              <li>Cream butter with sugar ~3 min; beat in eggs and vanilla.</li>
              <li>Mix in dry just until combined; add milk, zest, juice; mix just until combined.</li>
              <li>Divide and bake 21‚Äì26 min. Cool completely.</li>
            </ol>
          </li>
          <li><strong>Frosting</strong>
            <ol>
              <li>Beat butter 2 min; blend in cream cheese.</li>
              <li>Add sugar, lemon juice, vanilla; beat high 3 min; adjust to taste.</li>
            </ol>
          </li>
        `
      },
      {
        id:"thumbprint",
        rank: 2,
        title:"Thumbprint Cookies",
        img1:p("ThumbPrint_1.jpg"),
        img2:p("ThumbPrint_2.jpg"),
        img2Fallback:p("ThumPrint_2.jpg"),
        ingredientsHTML: `
          <li><strong>Cookie Dough</strong>
            <ul>
              <li>2 sticks unsalted butter, softened</li>
              <li>1 cup sugar (plus extra for rolling)</li>
              <li>2 egg yolks</li>
              <li>2¬Ω cups all-purpose flour</li>
              <li>1 tsp salt</li>
              <li>Strawberry jam</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Cream butter with sugar.</li>
              <li>Mix in egg yolks.</li>
              <li>Add flour and salt; mix to a dough.</li>
              <li>Roll balls; roll in sugar; press a thumb well; fill with jam.</li>
              <li>Bake 350¬∞F for 8‚Äì10 min.</li>
            </ol>
          </li>
        `
      },
      {
        id:"focaccia",
        rank: 3,
        title:"Focaccia Bread",
        meta:"Olive oil rich ‚Ä¢ Dimpled top",
        img1:p("Foccacia.JPG"),
        ingredientsHTML: `
          <li><strong>Dough</strong>
            <ul>
              <li>1 3/4 cups warm water (105‚Äì115¬∞F) ‚Ä¢ 2 tsp sugar</li>
              <li>2 1/4 tsp active dry yeast</li>
              <li>500 g AP flour (‚âà4 cups) ‚Ä¢ 2 tsp sea salt</li>
              <li>6 Tbsp extra-virgin olive oil (plus more), flaky salt, rosemary (opt.)</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Bloom yeast in water with sugar 5 min. Mix in flour and salt (shaggy), then medium 5 min.</li>
              <li>Oil bowl; rise 1‚Äì1¬Ω h. Oil 9√ó13\" pan; fold dough; press to edges; rest 45 min. Preheat 425¬∞F.</li>
              <li>Dimple; drizzle oil; salt and rosemary; bake 20‚Äì30 min until golden.</li>
            </ol>
          </li>
        `
      },
      {
        id:"blackberrylavender",
        title:"Blackberry Lavender Cake",
        meta:"Lavender milk + syrup ‚Ä¢ Cream cheese buttercream",
        img1:p("Blackberry_cake.JPG"),
        ingredientsHTML: `
          <li><strong>Lavender Milk</strong>
            <ul>
              <li>1 cup whole milk</li>
              <li>2 tsp dried culinary lavender</li>
            </ul>
          </li>
          <li><strong>Lavender Syrup</strong>
            <ul>
              <li>1/2 cup water ‚Ä¢ 1/2 cup sugar ‚Ä¢ 2 tsp lavender</li>
            </ul>
          </li>
          <li><strong>Cake</strong>
            <ul>
              <li>1/4 cup sour cream ‚Ä¢ 2 1/2 cups cake flour</li>
              <li>1 1/2 cups sugar ‚Ä¢ 1 Tbsp baking powder ‚Ä¢ 1/2 tsp salt</li>
              <li>1 cup unsalted butter, diced and softened</li>
              <li>1 1/2 tsp vanilla ‚Ä¢ 4 eggs</li>
            </ul>
          </li>
          <li><strong>Cream Cheese Buttercream & Filling</strong>
            <ul>
              <li>1 cup butter ‚Ä¢ 8 oz cream cheese ‚Ä¢ 5 1/2 cups confectioners‚Äô sugar</li>
              <li>2 Tbsp milk ‚Ä¢ 2 tsp vanilla ‚Ä¢ pinch salt ‚Ä¢ blackberry jam</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Milk + Syrup</strong>
            <ol>
              <li>Steep lavender in hot milk 20 min; strain and cool.</li>
              <li>Simmer sugar with water and lavender 10 min; cool and strain.</li>
            </ol>
          </li>
          <li><strong>Bake</strong>
            <ol>
              <li>Preheat 350¬∞F. Grease and line three 8\" pans.</li>
              <li>Mix dry with butter, vanilla, and half the milk/sour cream 1 min.</li>
              <li>Whisk eggs into remaining milk/sour cream; add in 3 parts, mixing 15 s each.</li>
              <li>Divide; bake 20‚Äì22 min. Cool; level; brush with syrup.</li>
            </ol>
          </li>
          <li><strong>Frost</strong>
            <ol>
              <li>Beat butter and cream cheese 2 min; add sugar, milk, vanilla, salt; beat 3 min.</li>
              <li>Pipe dams, add jam; crumb coat; chill; finish and garnish.</li>
            </ol>
          </li>
        `
      },
      {
        id:"confetti",
        title:"Confetti Cake",
        meta:"Three-layer funfetti with vanilla buttercream",
        img1:p("Confetti_Cake1.JPG"),
        img2:p("Confetti_Cake2.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong>
            <ul>
              <li>3 3/4 cups cake flour ‚Ä¢ 1 tsp baking powder ‚Ä¢ 1 tsp baking soda ‚Ä¢ 1 tsp salt</li>
              <li>1 1/4 cups butter ‚Ä¢ 2 cups sugar ‚Ä¢ 1/3 cup oil</li>
              <li>4 eggs + 2 egg whites ‚Ä¢ 3 tsp vanilla ‚Ä¢ 1 1/2 cups buttermilk</li>
              <li>3/4 cup rainbow sprinkles</li>
            </ul>
          </li>
          <li><strong>Vanilla Buttercream</strong>
            <ul>
              <li>1 1/2 cups butter ‚Ä¢ 5 1/2 cups confectioners‚Äô sugar</li>
              <li>1/3 cup heavy cream ‚Ä¢ 3 tsp vanilla ‚Ä¢ pinch salt</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Mix + Bake</strong>
            <ol>
              <li>Preheat 350¬∞F. Line three 8\" or 9\" pans.</li>
              <li>Cream butter and sugar 5 min; beat in oil, then eggs/whites and vanilla.</li>
              <li>Alternate dry and buttermilk in three adds; fold sprinkles. Bake ~25‚Äì26 min; cool.</li>
            </ol>
          </li>
          <li><strong>Frost</strong>
            <ol>
              <li>Beat butter, sugar, cream, vanilla, salt; assemble with 1 cup between layers; crumb coat and finish.</li>
            </ol>
          </li>
        `
      },
      {
        id:"carrot",
        title:"Carrot Cake",
        meta:"Toasted pecans ‚Ä¢ Cream cheese frosting",
        img1:p("Carrot_Cake.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong>
            <ul>
              <li>2 cups chopped pecans (half for batter, half for garnish)</li>
              <li>1 1/2 cups brown sugar ‚Ä¢ 1/2 cup sugar ‚Ä¢ 1 cup oil</li>
              <li>4 eggs ‚Ä¢ 3/4 cup applesauce ‚Ä¢ 1 tsp vanilla</li>
              <li>2 1/2 cups flour ‚Ä¢ 2 tsp baking powder ‚Ä¢ 1 tsp baking soda ‚Ä¢ 1/2 tsp salt</li>
              <li>1 1/2 tsp cinnamon ‚Ä¢ 1 tsp ginger ‚Ä¢ 1/4 tsp nutmeg ‚Ä¢ 1/4 tsp cloves</li>
              <li>2 cups grated carrots</li>
            </ul>
          </li>
          <li><strong>Cream Cheese Frosting</strong>
            <ul>
              <li>16 oz cream cheese ‚Ä¢ 1/2 cup butter ‚Ä¢ 4 cups confectioners‚Äô sugar</li>
              <li>1 1/2 tsp vanilla ‚Ä¢ pinch salt</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Toast + Bake</strong>
            <ol>
              <li>Toast pecans at 300¬∞F for 7‚Äì8 min. Raise oven to 350¬∞F. Line two or three 9\" pans.</li>
              <li>Whisk wet; whisk dry; fold together with carrots and pecans.</li>
              <li>Three pans 20‚Äì24 min or two pans 30‚Äì35 min. Cool completely.</li>
            </ol>
          </li>
          <li><strong>Frost</strong>
            <ol>
              <li>Beat cream cheese and butter 2 min; add sugar, vanilla, salt; beat 3 min; stack and frost.</li>
            </ol>
          </li>
        `
      },
      {
        id:"whitechoclemon",
        title:"Lemon White Chocolate Cookies",
        meta:"Bakery style ‚Ä¢ 400¬∞F",
        img1:p("WhiteChocolateLemon.JPG"),
        img2:p("WhiteChocolateLemon2.JPG"),
        ingredientsHTML: `
          <li><strong>Cookie Dough</strong>
            <ul>
              <li>1 cup butter, slightly cold and cubed</li>
              <li>3/4 cup sugar ‚Ä¢ 1/2 cup brown sugar ‚Ä¢ 2 Tbsp lemon zest</li>
              <li>1 egg + 1 yolk ‚Ä¢ 2 tsp lemon extract</li>
              <li>2 cups AP flour ‚Ä¢ 1 1/4 cups cake flour</li>
              <li>1 tsp baking powder ‚Ä¢ 1/2 tsp baking soda ‚Ä¢ 1/2 tsp salt</li>
              <li>16 oz white chocolate chips</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 400¬∞F; line tray.</li>
              <li>Cream butter with sugars and zest ~2 min. Beat in egg, yolk, extract.</li>
              <li>Mix in dry just to combine; fold chips. Portion 6-oz balls; bake ~12 min; cool.</li>
            </ol>
          </li>
        `
      },
      {
        id:"raspberrybrownie",
        title:"Fudge Raspberry Brownie Cookies",
        meta:"8√ó8 pan ‚Ä¢ extra fudgy",
        img1:p("RaspberryBrownie.JPG"),
        ingredientsHTML: `
          <li><strong>Batter</strong>
            <ul>
              <li>3/4 cup butter, melted ‚Ä¢ 3/4 cup Dutch cocoa ‚Ä¢ 1 tsp vanilla</li>
              <li>1 3/4 cup light brown sugar ‚Ä¢ 3 eggs</li>
              <li>3/4 cup flour ‚Ä¢ 1/2 tsp salt ‚Ä¢ 1/2 cup raspberries ‚Ä¢ 1/2 cup chocolate chips</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350¬∞F; line 8√ó8\" pan.</li>
              <li>Whisk butter with cocoa and vanilla. Whip eggs with sugar until pale; fold together.</li>
              <li>Fold in flour and salt, then raspberries and chips. Bake ~25 min; center should be fudgy.</li>
            </ol>
          </li>
        `
      },
      {
        id:"jellycat",
        title:"Jellycat Birthday Cake",
        meta:"Author: Gail Ng ‚Ä¢ 8 servings ‚Ä¢ ~2h 30m",
        img1:p("JellyCat_1.jpg"),
        img2:p("JellyCat_2.jpg"),
        ingredientsHTML: `
          <li><strong>Equipment</strong>
            <ul>
              <li>Two 6\" round cake pans ‚Ä¢ electric hand mixer ‚Ä¢ 3 piping bags</li>
            </ul>
          </li>
          <li><strong>Cake Layers</strong>
            <ul>
              <li>225 g AP flour ‚Ä¢ 1 1/2 tsp baking powder ‚Ä¢ 1/2 tsp salt</li>
              <li>3 eggs ‚Ä¢ 225 g sugar ‚Ä¢ 85 g butter ‚Ä¢ 190 g milk ‚Ä¢ 2 Tbsp oil ‚Ä¢ 1 1/2 tsp vanilla</li>
            </ul>
          </li>
          <li><strong>Filling</strong>
            <ul>
              <li>300 g cream ‚Ä¢ 30 g powdered sugar ‚Ä¢ 1 tsp vanilla ‚Ä¢ 1‚Äì2 tsp cocoa ‚Ä¢ strawberry jam</li>
            </ul>
          </li>
          <li><strong>Assemble</strong>
            <ol>
              <li>Preheat 350¬∞F; line pans. Whip eggs with sugar ~6 min until very pale.</li>
              <li>Warm milk with butter, oil, vanilla. Whisk dry. Combine gently; bake 35‚Äì40 min; cool.</li>
              <li>Whip cream to peaks (tint a little with cocoa). Pipe borders and fill with jam; decorate.</li>
            </ol>
          </li>
        `
      }
    ];

    /* ===== Podium first: sort by rank (1,2,3 first), then title ===== */
    RECIPES.sort((a, b) => {
      const ra = (a.rank ?? 99), rb = (b.rank ?? 99);
      return ra - rb || a.title.localeCompare(b.title);
    });

    /* ===== Medal SVG helper ===== */
    function medalSVG(rank){
      const pal = {
        1: {a:'#D4AF37', b:'#FFEE88', c:'#B88A00'}, // gold
        2: {a:'#B0B6C0', b:'#ECEFF4', c:'#8F9BA8'}, // silver
        3: {a:'#C48745', b:'#EABF97', c:'#8A5728'}  // bronze
      }[rank];
      if(!pal) return "";
      const {a,b,c} = pal;
      return `
        <span class="rcp-medal" aria-label="Top ${rank}">
          <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
            <defs>
              <linearGradient id="g${rank}" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="${a}"/><stop offset="60%" stop-color="${b}"/><stop offset="100%" stop-color="${c}"/>
              </linearGradient>
            </defs>
            <!-- ribbon tails -->
            <path d="M20 40 l-6 18 10-6 8 6 8-6 10 6 -6-18" fill="#e04b4b"/>
            <!-- medal body -->
            <circle cx="32" cy="28" r="16" fill="url(#g${rank})" stroke="rgba(0,0,0,.18)" stroke-width="2"/>
            <circle cx="32" cy="28" r="13" fill="url(#g${rank})" opacity=".85"/>
            <!-- number -->
            <text x="32" y="32" text-anchor="middle"
                  font-family="ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"
                  font-size="14" font-weight="800"
                  fill="#fff" stroke="rgba(0,0,0,.35)" stroke-width="1">${rank}</text>
          </svg>
        </span>`;
    }

    // ===== Render cards =====
    const grid = document.getElementById('rcpGrid');
    RECIPES.forEach(r=>{
      const el=document.createElement('article');
      el.className='rcp-card';
      el.innerHTML = `
        <button class="rcp-toggle" data-id="${r.id}" aria-label="Open ${r.title}">
          <div class="rcp-photo">
            ${r.rank ? medalSVG(r.rank) : ""}
            <img src="${r.img1}" alt="${r.title} cover" loading="lazy">
            <div class="rcp-caption">${r.title}</div>
          </div>
        </button>`;
      grid.appendChild(el);
    });

    // ===== Lightbox behavior (animated) =====
    const backdrop = document.getElementById('rcpBackdrop');
    const dialog   = document.getElementById('rcpDialog');
    const closeBtn = document.getElementById('rcpClose');
    const mTitle = document.getElementById('modalTitle');
    const mMeta  = document.getElementById('modalMeta');
    const mImg1  = document.getElementById('mImg1');
    const mImg2  = document.getElementById('mImg2');
    const mIngr  = document.getElementById('mIngr');
    const mSteps = document.getElementById('mSteps');
    const MS = 260;

    function openModal(recipe){
      mTitle.textContent = recipe.title;
      mMeta.textContent  = recipe.meta || "";
      mImg1.src = recipe.img1; mImg1.alt = `${recipe.title} image 1`;

      // second image (hide if missing)
      mImg2.onerror = null;
      if (recipe.img2){
        mImg2.style.display = '';
        mImg2.src = recipe.img2; mImg2.alt = `${recipe.title} image 2`;
        if (recipe.img2Fallback){
          mImg2.onerror = function(){ this.onerror=null; this.src = recipe.img2Fallback; };
        }
      } else {
        mImg2.style.display = 'none';
        mImg2.removeAttribute('src');
      }

      if (recipe.ingredientsHTML) mIngr.innerHTML = recipe.ingredientsHTML;
      else mIngr.innerHTML = (recipe.ingredients||[]).map(x=>`<li>${x}</li>`).join('');
      if (recipe.stepsHTML) mSteps.innerHTML = recipe.stepsHTML;
      else mSteps.innerHTML = (recipe.steps||[]).map(x=>`<li>${x}</li>`).join('');

      dialog.classList.remove('closing'); backdrop.classList.remove('closing');
      document.body.classList.add('no-scroll');
      backdrop.classList.add('open');
      dialog.classList.add('visible');
      requestAnimationFrame(()=>{ dialog.classList.add('open'); });
    }

    function closeModal(){
      dialog.classList.add('closing'); backdrop.classList.add('closing');
      setTimeout(()=>{
        document.body.classList.remove('no-scroll');
        dialog.classList.remove('open','closing','visible');
        backdrop.classList.remove('open','closing');
      }, MS);
    }

    grid.addEventListener('click', (e)=>{
      const btn = e.target.closest('.rcp-toggle');
      if(!btn) return;
      const id = btn.dataset.id;
      const recipe = RECIPES.find(x=>x.id===id);
      if (recipe) openModal(recipe);
    });
    closeBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', closeModal);
    dialog.addEventListener('click', (e)=>{ if(e.target === dialog) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
