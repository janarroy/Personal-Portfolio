<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bake – Jan Arroyo</title>
  <link href="styles.css" rel="stylesheet" />
  <style>
    /* ====== Grid (3 per row) ====== */
    .rcp-grid{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);}
    @media (max-width:1100px){.rcp-grid{grid-template-columns:repeat(2,1fr);}}
    @media (max-width:640px){.rcp-grid{grid-template-columns:1fr;}}

    /* ====== Card ====== */
    .rcp-card{border-radius:16px;overflow:hidden;background:var(--panel,#fff);
      border:1px solid rgba(17,19,24,.08);box-shadow:0 6px 24px rgba(17,19,24,.06);
      transition:box-shadow .2s ease;}
    .rcp-card:hover{box-shadow:0 10px 28px rgba(17,19,24,.10);}
    .rcp-toggle{display:block;width:100%;padding:0;border:0;background:transparent;cursor:pointer;text-align:left;}
    .rcp-photo{position:relative;aspect-ratio:4/3;}
    .rcp-photo img{width:100%;height:100%;object-fit:cover;display:block;}
    .rcp-caption{position:absolute;left:0;right:0;bottom:0;padding:10px 12px;color:#fff;font-weight:700;
      background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));text-shadow:0 1px 2px rgba(0,0,0,.5);}

    /* ===== Lightbox (fixed + truly hidden by default) ===== */
  body.no-scroll{overflow:hidden;}

.modal-backdrop{
  position:fixed; inset:0;
  background:rgba(0,0,0,.85);
  opacity:0; pointer-events:none; display:none;
  transition:opacity .2s ease; z-index:60;
}
.modal-backdrop.open{display:block; opacity:1; pointer-events:auto;}

.modal-dialog{
  position:fixed; inset:0; z-index:61;
  display:none; place-items:center; /* becomes grid when open */
}
.modal-dialog.open{display:grid;}

.modal-panel{
  background:#111; color:#fff; border-radius:16px;
  max-width:920px; width:min(96vw,920px); overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}
.modal-head{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 16px; border-bottom:1px solid rgba(255,255,255,.08);
}
.modal-title{font-weight:700;}
.modal-close{background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer;line-height:1;}

/* stacked images + scrollable body */
.modal-body{
  padding:16px; display:grid; gap:16px;
  max-height:80vh; overflow:auto;   /* <— allows scrolling */
}
.modal-photos{ display:grid; gap:12px; grid-template-columns:1fr; }
.modal-photos img{
  width:100%; height:auto; display:block; background:#fff;
  border-radius:12px; object-fit:contain;
}

.modal-recipe{ display:grid; gap:16px; grid-template-columns:1fr 1fr; }
@media (max-width:900px){ .modal-recipe{ grid-template-columns:1fr; } }
.modal-recipe h4{ margin:0 0 6px; }
.modal-recipe ul,.modal-recipe ol{ margin:0 0 0 18px; }
</style>
</head>
<body>
  <!-- Nav -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="./">JAN</a>
      <div class="nav-links">
        <a class="btn" href="work.html">Projects</a>
        <a class="btn" href="races.html">Races</a>
        <a class="btn" href="bake.html">Bake</a>
        <a class="btn" href="travel.html">Travel</a>
        <a class="btn" href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <main class="container work">
    <h1 class="page-title">Bake</h1>
    <p class="tag">Click a photo to open a lightbox — second image + the recipe appear in the overlay.</p>

    <section class="rcp-grid" id="rcpGrid"><!-- cards injected by JS --></section>
  </main>

  <footer><div class="container">© <span id="y"></span> Jan Arroyo</div></footer>

  <!-- Lightbox markup -->
  <div class="modal-backdrop" id="rcpBackdrop"></div>
  <div class="modal-dialog" id="rcpDialog" aria-hidden="true">
    <article class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal-head">
        <div class="modal-title" id="modalTitle">Recipe</div>
        <button class="modal-close" id="rcpClose" aria-label="Close">×</button>
      </header>
      <div class="modal-body">
        <div class="modal-photos">
          <img id="mImg1" alt="" loading="lazy">
          <img id="mImg2" alt="" loading="lazy">
        </div>
        <div class="modal-recipe">
          <div>
            <h4>Ingredients</h4>
            <ul id="mIngr"></ul>
          </div>
          <div>
            <h4>Steps</h4>
            <ol id="mSteps"></ol>
          </div>
        </div>
      </div>
    </article>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // Build repo-safe image paths (works at /Personal-Portfolio and locally)
    const BASE = (() => {
      const seg = location.pathname.split('/')[1];
      return seg ? `/${seg}` : '';
    })();
    const p = (name) => `${BASE}/images/${name}`;

    // ====== Your recipes ======
    const RECIPES = [
      {
        id:"jellycat",
        title:"JellyCat Cookies",
        img1:p("JellyCat_1.jpg"),
        img2:p("JellyCat_2.jpg"),
        ingredients:[
          "1 cup (226g) unsalted butter, room temp",
          "3/4 cup (150g) sugar",
          "1 large egg",
          "2 tsp vanilla",
          "2 1/4 cups (270g) AP flour",
          "1/2 tsp baking powder, 1/2 tsp salt"
        ],
        steps:[
          "Cream butter + sugar 2–3 min; beat in egg and vanilla.",
          "Whisk dry; fold into wet just until combined.",
          "Scoop 1.5 Tbsp; chill 15 min; bake 350°F for 10–12 min.",
          "Cool and decorate."
        ]
      },
      {
        id:"thumbprint",
        title:"Thumbprint Cookies",
        img1:p("ThumbPrint_1.jpg"),
        img2:p("ThumbPrint_2.jpg"),
        img2Fallback:p("ThumPrint_2.jpg"), // fallback if filename lacks the “b”
        ingredients:[
          "1 cup (226g) unsalted butter, room temp",
          "2/3 cup (85g) powdered sugar",
          "2 tsp vanilla, pinch of salt",
          "2 cups (240g) AP flour",
          "1/2 cup jam"
        ],
        steps:[
          "Beat butter + sugar until smooth; mix in vanilla + salt.",
          "Add flour until dough forms.",
          "Roll 1 Tbsp balls; thumb a well; fill with jam.",
          "Bake 350°F for 12–14 min; cool; dust with sugar."
        ]
      }
    ];

    // ====== Render 3-up cards ======
    const grid = document.getElementById('rcpGrid');
    RECIPES.forEach(r=>{
      const el=document.createElement('article');
      el.className='rcp-card';
      el.innerHTML = `
        <button class="rcp-toggle" data-id="${r.id}" aria-label="Open ${r.title}">
          <div class="rcp-photo">
            <img src="${r.img1}" alt="${r.title} cover" loading="lazy">
            <div class="rcp-caption">${r.title}</div>
          </div>
        </button>`;
      grid.appendChild(el);
    });

    // ====== Lightbox behavior ======
    const backdrop = document.getElementById('rcpBackdrop');
  const dialog   = document.getElementById('rcpDialog');
  const closeBtn = document.getElementById('rcpClose');
  const mTitle = document.getElementById('modalTitle');
  const mImg1  = document.getElementById('mImg1');
  const mImg2  = document.getElementById('mImg2');
  const mIngr  = document.getElementById('mIngr');
  const mSteps = document.getElementById('mSteps');

  function openModal(recipe){
    mTitle.textContent = recipe.title;
    mImg1.src = recipe.img1; mImg1.alt = `${recipe.title} image 1`;
    mImg2.onerror = null;
    mImg2.src = recipe.img2; mImg2.alt = `${recipe.title} image 2`;
    if (recipe.img2Fallback){
      mImg2.onerror = function(){ this.onerror=null; this.src = recipe.img2Fallback; };
    }
    mIngr.innerHTML = (recipe.ingredients||[]).map(x=>`<li>${x}</li>`).join('');
    mSteps.innerHTML = (recipe.steps||[]).map(x=>`<li>${x}</li>`).join('');

    document.body.classList.add('no-scroll');
    backdrop.classList.add('open');
    dialog.classList.add('open');               // <— actually show dialog
  }

  function closeModal(){
    document.body.classList.remove('no-scroll');
    backdrop.classList.remove('open');
    dialog.classList.remove('open');            // <— actually hide dialog
  }

  // open
  document.getElementById('rcpGrid').addEventListener('click', (e)=>{
    const btn = e.target.closest('.rcp-toggle');
    if(!btn) return;
    const id = btn.dataset.id;
    const recipe = RECIPES.find(x=>x.id===id);
    if (recipe) openModal(recipe);
  });

  // close (✕, click-dim, or Esc)
  closeBtn.addEventListener('click', closeModal);
  backdrop.addEventListener('click', closeModal);
  dialog.addEventListener('click', (e)=>{ if(e.target === dialog) closeModal(); });
  window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
</script>
</body>
</html>
