<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bake – Jan Arroyo</title>
  <link href="styles.css" rel="stylesheet" />
  <style>
    /* ===== Interactive sprinkle canvas sits behind everything ===== */
    #sprinkles {
      position: fixed; inset: 0; z-index: -3; pointer-events: none;
    }

    /* Subtle cream wash behind content */
    body::before{
      content:""; position:fixed; inset:0; z-index:-2; pointer-events:none;
      background:
        radial-gradient(1200px 500px at 0% -10%, rgba(255,240,215,.55), transparent 60%),
        radial-gradient(1200px 500px at 110% 110%, rgba(210,235,255,.45), transparent 60%);
      opacity:.9;
    }

    /* ===== Grid: 3 per row (2 / 1 on smaller screens) ===== */
    .rcp-grid{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);}
    @media (max-width:1100px){.rcp-grid{grid-template-columns:repeat(2,1fr);}}
    @media (max-width:640px){.rcp-grid{grid-template-columns:1fr;}}

    /* ===== Cards ===== */
    .rcp-card{border-radius:16px;overflow:hidden;background:#fff;
      border:1px solid rgba(17,19,24,.08);box-shadow:0 6px 24px rgba(17,19,24,.06);
      transition:box-shadow .2s ease, transform .18s ease;}
    .rcp-card:hover{box-shadow:0 10px 28px rgba(17,19,24,.10); transform: translateY(-2px);}
    .rcp-toggle{display:block;width:100%;padding:0;border:0;background:transparent;cursor:pointer;text-align:left;}
    .rcp-photo{position:relative;aspect-ratio:4/3;}
    .rcp-photo img{width:100%;height:100%;object-fit:cover;display:block;}
    .rcp-caption{position:absolute;left:0;right:0;bottom:0;padding:10px 12px;color:#fff;font-weight:700;
      background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));text-shadow:0 1px 2px rgba(0,0,0,.5);}

    /* ===== Lightbox (cream + animated) ===== */
    :root { --modal-ms: 260ms; --easing: cubic-bezier(.2,.7,.2,1); }
    body.no-scroll{overflow:hidden;}

    .modal-backdrop{
      position:fixed; inset:0;
      background:rgba(255,248,240,.85);
      backdrop-filter:saturate(1.1) blur(2px);
      opacity:0; pointer-events:none; display:none;
      transition:opacity var(--modal-ms) var(--easing); z-index:60;
    }
    .modal-backdrop.open{display:block; opacity:1; pointer-events:auto;}
    .modal-backdrop.closing{opacity:0;}

    .modal-dialog{ position:fixed; inset:0; z-index:61; display:none; place-items:center; }
    .modal-dialog.visible{ display:grid; }                /* render first */
    .modal-dialog.open .modal-panel{ opacity:1; transform:none; } /* animate in */
    .modal-dialog.closing .modal-panel{ opacity:0; transform: translateY(8px) scale(.985); }

    .modal-panel{
      background:#fffaf0; color:#1f2937;
      border:1px solid rgba(17,19,24,.08);
      border-radius:16px; max-width:920px; width:min(96vw,920px);
      box-shadow:0 20px 60px rgba(0,0,0,.25); overflow:hidden;
      opacity:0; transform: translateY(12px) scale(.98);
      transition: opacity var(--modal-ms) var(--easing), transform var(--modal-ms) var(--easing);
      will-change: opacity, transform;
    }
    .modal-head{
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 16px; border-bottom:1px solid rgba(17,19,24,.08);
    }
    .modal-title{font-weight:700;}
    .modal-close{background:transparent;border:0;color:#111;font-size:22px;cursor:pointer;line-height:1;}

    .modal-body{
      padding:16px; display:grid; gap:16px;
      max-height:80vh; overflow:auto;
    }
    .modal-photos{ display:grid; gap:12px; grid-template-columns:1fr; }
    .modal-photos img{
      width:100%; height:auto; display:block; background:#fff;
      border-radius:12px; object-fit:contain;
    }
    .modal-recipe{ display:grid; gap:16px; grid-template-columns:1fr 1fr; }
    @media (max-width:900px){ .modal-recipe{ grid-template-columns:1fr; } }
    .modal-recipe h4{ margin:0 0 6px; }
    .modal-recipe ul,.modal-recipe ol{ margin:0 0 0 18px; }
    .muted{color:#6b7280;font-size:14px;}

    /* === Podium medal badge (SVG ribbon) === */
    .rcp-medal{
      position:absolute; top:10px; left:10px;
      width:44px; height:44px; z-index:2;
    }
    .rcp-medal svg{
      width:100%; height:100%; display:block;
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.25));
    }

    /* ===== Hero intro (human, simple) ===== */
    .hero {
      position: relative;
      margin: 28px 0 14px;
      padding: 28px 22px 22px;
      border-radius: 18px;
      background:
        radial-gradient(1200px 400px at -10% 0%, rgba(255,214,165,.25), transparent 60%),
        radial-gradient(1200px 400px at 110% 100%, rgba(189,224,254,.25), transparent 60%),
        #fffaf0;
      border: 1px solid rgba(17,19,24,.08);
      box-shadow: 0 10px 40px rgba(17,19,24,.08);
      overflow: hidden;
    }
    .hero h1{
      margin: 0 0 6px;
      font-size: clamp(26px, 3.4vw, 38px);
    }
    .hero p{
      margin: 0;
      max-width: 70ch;
      line-height: 1.55;
      font-size: clamp(15px, 1.9vw, 16px);
    }

    /* Snorlax sticker peeking from the corner */
    .snorlax-img, .snorlax-fallback{
      position:absolute; right:14px; top:-22px;
      width:70px; height:70px;
      object-fit:contain; border-radius:14px;
      transform: rotate(-6deg) translateY(0);
      animation: bob 3.2s ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
      user-select: none;
    }
    .snorlax-fallback{
      display:flex; align-items:center; justify-content:center;
      background:#142d4c; color:#fff; font-size:34px; font-weight:800;
    }
    @keyframes bob { 0%,100%{ transform:rotate(-6deg) translateY(0)} 50%{ transform:rotate(-6deg) translateY(4px)} }
/* wipe the old hero look */
.hero.hero-recipecard{
  margin: 28px 0 6px;
  padding: 0;
  background: transparent;
  border: 0;
  box-shadow: none;
}


/* Paper recipe card – lined, pinned with “tape”, red margin line */
.recipe-card{
  position: relative;
  padding: 26px 24px 22px 56px;          /* room for red margin */
  max-width: 980px;
  border-radius: 14px;
  border: 1px solid rgba(17,19,24,.10);
  margin: 0 auto;
  background:
    /* faint white sheet */
    linear-gradient(#ffffffee, #ffffffee),
    /* blue ruled lines */
    repeating-linear-gradient(
      to bottom,
      transparent 0 29px,
      rgba(17, 94, 201, .10) 30px 30.5px
    );
  box-shadow: 0 12px 32px rgba(17,19,24,.08);
  backdrop-filter: saturate(1.05);
  transform: rotate(-.2deg);
  transition: transform .25s cubic-bezier(.2,.7,.2,1), box-shadow .25s;
}
.recipe-card:hover{
  transform: rotate(0deg) translateY(-1px);
  box-shadow: 0 16px 38px rgba(17,19,24,.12);
}

/* red margin line on paper */
.recipe-card::before{
  content:"";
  position:absolute; inset: 0 auto 0 36px;
  width: 2px; background: rgba(220,38,38,.28);
  border-radius: 2px;
}

/* “washi tape” pin at top-left */
.recipe-card::after{
  content:"";
  position:absolute; top:-14px; left:14px;
  width: 86px; height: 22px; border-radius: 6px;
  transform: rotate(-8deg);
  background:
    linear-gradient(45deg, rgba(0,0,0,.06) 25%, transparent 25% 50%, rgba(0,0,0,.06) 50% 75%, transparent 75%) 0/12px 12px,
    rgba(255, 230, 180, .85);
  box-shadow: 0 8px 16px rgba(17,19,24,.15);
  mix-blend-mode: multiply;
}

/* Typography */
.recipe-card h1{
  margin: 0 0 6px;
  font-size: clamp(28px, 3.8vw, 40px);
  line-height: 1.15;
}
.recipe-card p{
  margin: 0;
  max-width: 70ch;
  line-height: 1.55;
  font-size: clamp(15px, 1.9vw, 16px);
  color: #222;
}

/* a tiny whisk doodle in the corner (inline SVG via data-URL) */
.recipe-card .whisk{ display:none; } /* if you want a real <img>, ignore this */
.recipe-card:has(.whisk), .recipe-card{
  /* add the whisk automatically with a pseudo background */
}
.recipe-card{
  --whisk: url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'>\
    <g fill='none' stroke='%23222' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>\
      <path d='M41 46 L53 58'/>\
      <path d='M13 10 c12 10 27 25 30 28 3 3 3 7 0 10 s-7 3-10 0 c-3-3-18-18-28-30'/>\
      <path d='M18 15 l-6 6'/>\
    </g>\
  </svg>");
  background-image: var(--whisk), linear-gradient(#0000,#0000); /* keep existing backgrounds */
  background-repeat: no-repeat;
  background-position: right 14px bottom 10px, 0 0;
  background-size: 62px 62px, auto;
}

/* Keep your floating Munchlax as-is */


    /* Floating Munchlax sticker (fully visible, outside the hero) */
.munchlax-sticker{
  position: fixed;
  right: 18px;           /* move it here */
  bottom: 18px;          /* …and here if you want a different corner */
  width: 120px;
  height: 120px;
  z-index: 55;           /* below modal (z 60/61), above page */
  cursor: grab;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
  user-select: none;
  transition: transform .2s ease;
}
.munchlax-sticker:active{ cursor: grabbing; transform: scale(.98); }
.munchlax-sticker img{ width: 100%; height: 100%; object-fit: contain; display: block; }
@media (max-width: 680px){
  .munchlax-sticker{ width: 86px; height: 86px; right: 12px; bottom: 12px; }
}
/* Hide the sticker while the lightbox is open (body gets .no-scroll) */
body.no-scroll #munchlaxSticker{ opacity: 0; pointer-events: none; }

/* Rounded, card-like Munchlax */
.munchlax-sticker{
  border-radius: 16px;
  overflow: hidden;                     /* clips the gif corners */
  background: rgba(255,255,255,.6);     /* optional soft card behind the gif */
  border: 1px solid rgba(17,19,24,.08); /* optional thin border */
  backdrop-filter: saturate(1.05) blur(2px);
}

.munchlax-sticker img{
  border-radius: inherit;               /* keeps corners matched */
}

/* Sticker wrapper: no card chrome */
.munchlax-sticker{
  background: transparent;
  border: 0;
  backdrop-filter: none;
  overflow: visible;      /* don't clip */
  border-radius: 0;
  filter: none;           /* remove drop-shadow from the RECT wrapper */
}

/* Round the actual GIF */
.munchlax-sticker img{
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;     /* <- the gif itself is circular now */
  box-shadow: 0 10px 18px rgba(0,0,0,.25); /* shadow follows the circle */
}

/* ===== Scrapbook hero layout ===== */
.hero-collage{
  --gap: 18px;
  display: grid;
  grid-template-columns: 1fr min(32vw, 280px);
  align-items: center;
  gap: var(--gap);
  margin: 28px 0 10px;
}
@media (max-width: 820px){
  .hero-collage{ grid-template-columns: 1fr; }
}

/* ===== Lined note with folded corner (not a pill/oval) ===== */
.note{
  position: relative;
  padding: 26px 22px 22px 56px;      /* room for red margin line */
  border-radius: 14px;
  border: 1px solid rgba(17,19,24,.10);
  background:
    linear-gradient(#ffffffee,#ffffffee),
    repeating-linear-gradient(to bottom, transparent 0 28px, rgba(30,97,195,.10) 29px 29.5px);
  box-shadow: 0 12px 28px rgba(17,19,24,.10);
  transform: rotate(-.3deg);
  transition: transform .25s cubic-bezier(.2,.7,.2,1), box-shadow .25s;
}
.note:hover{ transform: rotate(0deg) translateY(-1px); box-shadow: 0 16px 36px rgba(17,19,24,.14); }

/* red margin line like notebook paper */
.note::before{
  content:"";
  position:absolute; inset: 0 auto 0 36px; width:2px;
  background: rgba(220,38,38,.28);
  border-radius:2px;
}

/* folded corner (dog-ear) */
.note::after{
  content:"";
  position:absolute; top:-10px; right:16px; width:75px; height:26px;
  transform: rotate(7deg);
  background:
    linear-gradient(45deg, rgba(0,0,0,.06) 25%, transparent 25% 50%, rgba(0,0,0,.06) 50% 75%, transparent 75%) 0/12px 12px,
    rgba(255, 230, 180, .85);
  border-radius: 6px;
  box-shadow: 0 8px 16px rgba(17,19,24,.15);
  mix-blend-mode: multiply;
}

/* Title with playful gradient + hand-drawn underline */
.title-spark{
  background: linear-gradient(90deg,#f59e0b,#fb7185,#60a5fa,#34d399);
  -webkit-background-clip: text; background-clip: text; color: transparent;
  position: relative;
}
.title-spark::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-4px; height:10px;
  background:
    url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 20'>\
        <path d='M2 12 Q20 2,40 12 T80 12 T120 12 T160 12 T198 12' \
              fill='none' stroke='rgba(0,0,0,.35)' stroke-width='6' stroke-linecap='round'/>\
      </svg>") center/100% 100% no-repeat;
  pointer-events:none;
}
.note h1{ margin:0 0 6px; font-size: clamp(28px,3.8vw,40px); line-height:1.15; }
.note p{ margin:0; max-width:70ch; line-height:1.55; font-size: clamp(15px,1.9vw,16px); color:#222; }

/* ===== Polaroid photo ===== */
.polaroid{
  justify-self: end;
  width: min(32vw, 280px);
  background:#fff;
  border-radius: 10px;
  padding: 10px 10px 46px;
  box-shadow: 0 15px 30px rgba(17,19,24,.22);
  transform: rotate(3deg);
  position: relative;
}
.polaroid img{ width:100%; height:auto; display:block; border-radius:6px; }
.polaroid figcaption{
  position:absolute; left:12px; right:12px; bottom:10px;
  font-size:12.5px; letter-spacing:.2px; color:#111;
  opacity:.8; text-align:center;
}
.polaroid::before{
  /* small tape strip on the photo */
  content:""; position:absolute; top:-10px; left:14px; width:64px; height:22px;
  background:
    linear-gradient(45deg, rgba(0,0,0,.06) 25%, transparent 25% 50%, rgba(0,0,0,.06) 50% 75%, transparent 75%) 0/12px 12px,
    rgba(255, 230, 180, .9);
  border-radius:6px; transform: rotate(-10deg);
  box-shadow: 0 8px 16px rgba(17,19,24,.18);
}
@media (max-width:820px){
  .polaroid{ justify-self: start; transform: rotate(-2deg); width: min(78vw, 320px); }
}

/* tighten space below the scrapbook hero */
.hero-collage{
  margin: 18px auto 6px;           /* was larger; this reduces the white space */
}

/* “Recipes” sub-header: a clean label with a line running behind it */
.section-kicker{
  max-width: 1100px;
  margin: 6px auto 12px;
  line-height: 1;
  position: relative;
  padding-inline: 4px;
}
.section-kicker span{
  display: inline-block;
  padding: 10px 14px;
  border-radius: 999px;
  background: #fff;
  border: 1px solid rgba(17,19,24,.10);
  box-shadow: 0 6px 12px rgba(17,19,24,.06);
  font-weight: 600;
  letter-spacing: .3px;
}
.section-kicker::after{
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 50%;
  height: 1px;
  background: linear-gradient(
    90deg,
    rgba(17,19,24,.14),
    rgba(17,19,24,.08) 40%,
    rgba(17,19,24,0)
  );
  z-index: -1;
}

/* tiny nudge for small screens */
@media (max-width: 820px){
  .hero-collage{ margin: 14px auto 4px; }
  .section-kicker{ margin: 4px auto 10px; }
}


  </style>
</head>
<body>
  <!-- Interactive sprinkle background -->
  <canvas id="sprinkles"></canvas>

  <!-- Nav -->
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="./">JAN</a>
      <div class="nav-links">
        <a class="btn" href="work.html">Projects</a>
        <a class="btn" href="races.html">Races</a>
        <a class="btn" href="bake.html">Bake</a>
        <a class="btn" href="travel.html">Travel</a>
        <a class="btn" href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <main class="container work">
    <!-- Scrapbook hero (note + polaroid) -->
<section class="hero-collage" aria-label="About this page">
  <div class="note">
    <h1><span class="title-spark">Bakes for my friends! :)</span></h1>
    <p>
      I like trying new recipes and turning raw ingredients into something that makes friends smile.
      I bring cakes for birthdays and job offers, cookies for study breaks, and focaccia for random Tuesdays.
      Open any card to see another photo and the full recipe.
    </p>
  </div>

  <figure class="polaroid">
    <img src="images/Eug+Jan.JPG" alt="Cutting a cake with a friend">
    <figcaption>cake-cutting crew</figcaption>
  </figure>
</section>

<h2 class="section-kicker" id="recipes">
  <span>Recipes</span>
</h2>


    <!-- Cards -->
    <section class="rcp-grid" id="rcpGrid"><!-- cards injected by JS --></section>
  </main>

  <footer><div class="container">© <span id="y"></span> Jan Arroyo</div></footer>

  <!-- Lightbox -->
  <div class="modal-backdrop" id="rcpBackdrop"></div>
  <div class="modal-dialog" id="rcpDialog" aria-hidden="true">
    <article class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal-head">
        <div>
          <div class="modal-title" id="modalTitle">Recipe</div>
          <div class="muted" id="modalMeta"></div>
        </div>
        <button class="modal-close" id="rcpClose" aria-label="Close">×</button>
      </header>
      <div class="modal-body">
        <div class="modal-photos">
          <img id="mImg1" alt="" loading="lazy">
          <img id="mImg2" alt="" loading="lazy">
        </div>
        <div class="modal-recipe">
          <div>
            <h4>Ingredients</h4>
            <ul id="mIngr"></ul>
          </div>
          <div>
            <h4>Steps</h4>
            <ol id="mSteps"></ol>
          </div>
        </div>
      </div>
    </article>
  </div>
<!-- Floating Munchlax sticker -->
<div id="munchlaxSticker" class="munchlax-sticker" aria-label="Munchlax sticker">
  <img src="images/munchlax-pokemon.gif" alt="Munchlax enjoying snacks">
</div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // Repo-safe image path helper
    const BASE = (() => {
      const seg = location.pathname.split('/')[1];
      return seg ? `/${seg}` : '';
    })();
    const p = (name) => `${BASE}/images/${name}`;

    // ===== Recipes (Top 3 are ranked) =====
    const RECIPES = [
      {
        id:"lemon",
        rank: 1,
        title:"Lemon Cake",
        meta:"Three 8\" layers • Cream cheese buttercream",
        img1:p("LemonCake.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong>
            <ul>
              <li>3 cups AP flour • 2½ tsp baking powder • 1/2 tsp baking soda • 1/2 tsp salt</li>
              <li>1 cup butter • 1¾ cups sugar • 3 eggs • 2 tsp vanilla • 1 cup milk</li>
              <li>1 Tbsp lemon zest • 1/3 cup lemon juice</li>
            </ul>
          </li>
          <li><strong>Cream Cheese Buttercream</strong>
            <ul>
              <li>1 cup butter • 8 oz cream cheese • 4½ cups confectioners’ sugar</li>
              <li>2 Tbsp lemon juice • 1 tsp vanilla • pinch salt</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li><strong>Bake the Cake</strong>
            <ol>
              <li>Preheat 350°F. Grease and line three 8\" pans.</li>
              <li>Cream butter with sugar ~3 min; beat in eggs and vanilla.</li>
              <li>Mix in dry just until combined; add milk, zest, juice; mix just until combined.</li>
              <li>Divide and bake 21–26 min. Cool completely.</li>
            </ol>
          </li>
          <li><strong>Frosting</strong>
            <ol>
              <li>Beat butter 2 min; blend in cream cheese. Add sugar, lemon juice, vanilla; beat 3 min.</li>
            </ol>
          </li>
        `
      },
      {
        id:"thumbprint",
        rank: 2,
        title:"Thumbprint Cookies",
        img1:p("ThumbPrint_1.jpg"),
        img2:p("ThumbPrint_2.jpg"),
        img2Fallback:p("ThumPrint_2.jpg"),
        ingredientsHTML: `
          <li><strong>Dough</strong>
            <ul>
              <li>2 sticks unsalted butter, softened • 1 cup sugar</li>
              <li>2 egg yolks • 2½ cups AP flour • 1 tsp salt • strawberry jam</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Cream butter with sugar. Mix in yolks.</li>
              <li>Add flour and salt; mix to a dough.</li>
              <li>Roll balls; roll in sugar; press a thumb well; fill with jam.</li>
              <li>Bake 350°F for 8–10 min.</li>
            </ol>
          </li>
        `
      },
      {
        id:"focaccia",
        rank: 3,
        title:"Focaccia Bread",
        meta:"Olive oil rich • Dimpled top",
        img1:p("Foccacia.JPG"),
        ingredientsHTML: `
          <li><strong>Dough</strong>
            <ul>
              <li>1 3/4 cups warm water • 2 tsp sugar • 2 1/4 tsp active dry yeast</li>
              <li>500 g AP flour • 2 tsp sea salt • 6 Tbsp olive oil</li>
            </ul>
          </li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Bloom yeast in water with sugar 5 min. Mix in flour and salt; knead 5 min.</li>
              <li>Rise 1–1½ h. Oil 9×13\" pan; fold dough; press to edges; rest 45 min. Preheat 425°F.</li>
              <li>Dimple; drizzle oil; salt and rosemary; bake 20–30 min until golden.</li>
            </ol>
          </li>
        `
      },
      {
        id:"blackberrylavender",
        title:"Blackberry Lavender Cake",
        meta:"Lavender milk and syrup • Cream cheese buttercream",
        img1:p("Blackberry_cake.JPG"),
        ingredientsHTML: `
          <li><strong>Lavender Milk</strong> milk and lavender steeped 20 min, strained and cooled</li>
          <li><strong>Lavender Syrup</strong> water, sugar, lavender simmered 10 min, strained</li>
          <li><strong>Cake</strong> cake flour, sugar, baking powder, salt, butter, vanilla, eggs, sour cream</li>
          <li><strong>Buttercream</strong> butter, cream cheese, confectioners’ sugar, milk, vanilla, salt; blackberry jam inside rings</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350°F. Line three 8\" pans. Mix dry with butter, vanilla, and half milk mixture 1 min.</li>
              <li>Whisk eggs into remaining milk; add in 3 parts. Bake 20–22 min. Brush layers with syrup.</li>
              <li>Frost and fill with jam; chill; finish and garnish.</li>
            </ol>
          </li>
        `
      },
      {
        id:"confetti",
        title:"Confetti Cake",
        meta:"Funfetti layers with vanilla buttercream",
        img1:p("Confetti_Cake1.JPG"),
        img2:p("Confetti_Cake2.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong> cake flour, baking powder, baking soda, salt, butter, sugar, oil, eggs, egg whites, vanilla, buttermilk, sprinkles</li>
          <li><strong>Buttercream</strong> butter, confectioners’ sugar, cream, vanilla, salt</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350°F. Cream butter and sugar 5 min; add oil, then eggs and vanilla.</li>
              <li>Alternate dry and buttermilk; fold sprinkles. Bake ~25–26 min. Cool and frost.</li>
            </ol>
          </li>
        `
      },
      {
        id:"carrot",
        title:"Carrot Cake",
        meta:"Toasted pecans • Cream cheese frosting",
        img1:p("Carrot_Cake.JPG"),
        ingredientsHTML: `
          <li><strong>Cake</strong> pecans, sugars, oil, eggs, applesauce, vanilla, flour, baking powder, baking soda, salt, spices, carrots</li>
          <li><strong>Frosting</strong> cream cheese, butter, confectioners’ sugar, vanilla, salt</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Toast pecans. Bake in 2 or 3 pans at 350°F (20–35 min). Cool completely.</li>
              <li>Frost and stack; press pecans on sides; chill to set.</li>
            </ol>
          </li>
        `
      },
      {
        id:"whitechoclemon",
        title:"Lemon White Chocolate Cookies",
        meta:"Bakery style • 400°F",
        img1:p("WhiteChocolateLemon.JPG"),
        img2:p("WhiteChocolateLemon2.JPG"),
        ingredientsHTML: `
          <li><strong>Dough</strong> butter, sugar, brown sugar, lemon zest, egg, yolk, lemon extract, AP flour, cake flour, baking powder, baking soda, salt, white chocolate chips</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 400°F. Cream butter, sugars, zest. Add egg, yolk, extract.</li>
              <li>Mix in dry; fold chips. Portion 6-oz balls; bake ~12 min; cool.</li>
            </ol>
          </li>
        `
      },
      {
        id:"raspberrybrownie",
        title:"Fudge Raspberry Brownie Cookies",
        meta:"8×8 pan • extra fudgy",
        img1:p("RaspberryBrownie.JPG"),
        ingredientsHTML: `
          <li><strong>Batter</strong> butter, Dutch cocoa, vanilla, brown sugar, eggs, flour, salt, raspberries, chocolate chips</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350°F; line pan. Whisk butter with cocoa and vanilla.</li>
              <li>Whip eggs with sugar until pale; fold together. Add flour and salt, then berries and chips.</li>
              <li>Bake ~25 min; center should be fudgy.</li>
            </ol>
          </li>
        `
      },
      {
        id:"matcha",
        title:"Matcha Cookies",
        meta:"Crinkle coated • 350°F",
        img1:p("Matcha_Cookie.JPG"),
        ingredientsHTML: `
          <li><strong>Dough</strong> butter, sugar, baking powder, baking soda, salt, eggs, flour, matcha</li>
          <li><strong>Roll</strong> granulated sugar, powdered sugar, matcha</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350°F. Cream butter with sugar and leaveners; beat in eggs.</li>
              <li>Sift matcha into flour; mix in. Scoop, roll in sugars, bake ~11 min.</li>
            </ol>
          </li>
        `
      },
      {
        id:"jellycat",
        title:"Jellycat Birthday Cake",
        meta:"Author: Gail Ng • 8 servings • ~2h 30m",
        img1:p("JellyCat_1.jpg"),
        img2:p("JellyCat_2.jpg"),
        ingredientsHTML: `
          <li><strong>Equipment</strong> two 6\" pans, hand mixer, piping bags</li>
          <li><strong>Cake Layers</strong> AP flour, baking powder, salt, eggs, sugar, butter, milk, oil, vanilla</li>
          <li><strong>Filling</strong> cream, powdered sugar, vanilla, cocoa, strawberry jam</li>
        `,
        stepsHTML: `
          <li>
            <ol>
              <li>Preheat 350°F; line pans. Whip eggs with sugar ~6 min.</li>
              <li>Warm milk with butter, oil, vanilla. Combine with dry; bake 35–40 min; cool.</li>
              <li>Whip cream; tint a little with cocoa. Pipe borders, fill with jam, decorate.</li>
            </ol>
          </li>
        `
      }
    ];

    /* ===== Podium first: sort by rank (1,2,3 first), then title ===== */
    RECIPES.sort((a, b) => {
      const ra = (a.rank ?? 99), rb = (b.rank ?? 99);
      return ra - rb || a.title.localeCompare(b.title);
    });

    /* ===== Medal SVG helper ===== */
    function medalSVG(rank){
      const pal = {
        1: {a:'#D4AF37', b:'#FFEE88', c:'#B88A00'}, // gold
        2: {a:'#B0B6C0', b:'#ECEFF4', c:'#8F9BA8'}, // silver
        3: {a:'#C48745', b:'#EABF97', c:'#8A5728'}  // bronze
      }[rank];
      if(!pal) return "";
      const {a,b,c} = pal;
      return `
        <span class="rcp-medal" aria-label="Top ${rank}">
          <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
            <defs>
              <linearGradient id="g${rank}" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="${a}"/><stop offset="60%" stop-color="${b}"/><stop offset="100%" stop-color="${c}"/>
              </linearGradient>
            </defs>
            <path d="M20 40 l-6 18 10-6 8 6 8-6 10 6 -6-18" fill="#e04b4b"/>
            <circle cx="32" cy="28" r="16" fill="url(#g${rank})" stroke="rgba(0,0,0,.18)" stroke-width="2"/>
            <circle cx="32" cy="28" r="13" fill="url(#g${rank})" opacity=".85"/>
            <text x="32" y="32" text-anchor="middle"
                  font-family="ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"
                  font-size="14" font-weight="800"
                  fill="#fff" stroke="rgba(0,0,0,.35)" stroke-width="1">${rank}</text>
          </svg>
        </span>`;
    }

    // ===== Render cards =====
    const grid = document.getElementById('rcpGrid');
    RECIPES.forEach(r=>{
      const el=document.createElement('article');
      el.className='rcp-card';
      el.innerHTML = `
        <button class="rcp-toggle" data-id="${r.id}" aria-label="Open ${r.title}">
          <div class="rcp-photo">
            ${r.rank ? medalSVG(r.rank) : ""}
            <img src="${r.img1}" alt="${r.title} cover" loading="lazy">
            <div class="rcp-caption">${r.title}</div>
          </div>
        </button>`;
      grid.appendChild(el);
    });

    // ===== Lightbox behavior (animated) =====
    const backdrop = document.getElementById('rcpBackdrop');
    const dialog   = document.getElementById('rcpDialog');
    const closeBtn = document.getElementById('rcpClose');
    const mTitle = document.getElementById('modalTitle');
    const mMeta  = document.getElementById('modalMeta');
    const mImg1  = document.getElementById('mImg1');
    const mImg2  = document.getElementById('mImg2');
    const mIngr  = document.getElementById('mIngr');
    const mSteps = document.getElementById('mSteps');
    const MS = 260;

    function openModal(recipe){
      mTitle.textContent = recipe.title;
      mMeta.textContent  = recipe.meta || "";
      mImg1.src = recipe.img1; mImg1.alt = `${recipe.title} image 1`;

      // second image (hide if missing)
      mImg2.onerror = null;
      if (recipe.img2){
        mImg2.style.display = '';
        mImg2.src = recipe.img2; mImg2.alt = `${recipe.title} image 2`;
        if (recipe.img2Fallback){
          mImg2.onerror = function(){ this.onerror=null; this.src = recipe.img2Fallback; };
        }
      } else {
        mImg2.style.display = 'none';
        mImg2.removeAttribute('src');
      }

      if (recipe.ingredientsHTML) mIngr.innerHTML = recipe.ingredientsHTML;
      else mIngr.innerHTML = (recipe.ingredients||[]).map(x=>`<li>${x}</li>`).join('');
      if (recipe.stepsHTML) mSteps.innerHTML = recipe.stepsHTML;
      else mSteps.innerHTML = (recipe.steps||[]).map(x=>`<li>${x}</li>`).join('');

      dialog.classList.remove('closing'); backdrop.classList.remove('closing');
      document.body.classList.add('no-scroll');
      backdrop.classList.add('open');
      dialog.classList.add('visible');
      requestAnimationFrame(()=>{ dialog.classList.add('open'); });
    }

    function closeModal(){
      dialog.classList.add('closing'); backdrop.classList.add('closing');
      setTimeout(()=>{
        document.body.classList.remove('no-scroll');
        dialog.classList.remove('open','closing','visible');
        backdrop.classList.remove('open','closing');
      }, MS);
    }

    grid.addEventListener('click', (e)=>{
      const btn = e.target.closest('.rcp-toggle');
      if(!btn) return;
      const id = btn.dataset.id;
      const recipe = RECIPES.find(x=>x.id===id);
      if (recipe) openModal(recipe);
    });
    closeBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', closeModal);
    dialog.addEventListener('click', (e)=>{ if(e.target === dialog) closeModal(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });

    /* ===== Interactive sprinkle background (lightweight) ===== */
    const cvs = document.getElementById('sprinkles');
    const ctx = cvs.getContext('2d');
    const SPR = [];
    const COLORS = ['#ffd166','#ef476f','#06d6a0','#118ab2','#fff1b8'];
    let w=0,h=0,mx=0,my=0;

    function resize(){
      w = cvs.width = window.innerWidth;
      h = cvs.height = window.innerHeight;
      SPR.length = 0;
      const count = Math.min(180, Math.floor((w*h)/11000)); // scale with screen
      for(let i=0;i<count;i++){
        SPR.push({
          x: Math.random()*w,
          y: Math.random()*h,
          w: 4 + Math.random()*6,
          h: 1.5 + Math.random()*2.5,
          a: Math.random()*Math.PI*2,
          v: .2 + Math.random()*0.6,
          c: COLORS[Math.floor(Math.random()*COLORS.length)],
          r: Math.random()*Math.PI
        });
      }
    }
    window.addEventListener('resize', resize);
    window.addEventListener('mousemove', e=>{ mx=e.clientX; my=e.clientY; });

    function tick(t){
      ctx.clearRect(0,0,w,h);
      const pushX = ((mx||w/2)-w/2)/w * 0.6;   // tiny parallax by mouse
      const pushY = ((my||h/2)-h/2)/h * 0.6;
      for(const s of SPR){
        s.x += (Math.cos(s.a)*s.v) + pushX;
        s.y += (Math.sin(s.a)*s.v) + pushY;
        s.r += 0.01;
        if(s.x<-20) s.x=w+20; if(s.x>w+20) s.x=-20;
        if(s.y<-20) s.y=h+20; if(s.y>h+20) s.y=-20;
        ctx.save();
        ctx.translate(s.x,s.y);
        ctx.rotate(s.r);
        ctx.fillStyle = s.c + 'cc';
        ctx.fillRect(-s.w/2,-s.h/2,s.w,s.h);
        ctx.restore();
      }
      requestAnimationFrame(tick);
    }
    resize();
    requestAnimationFrame(tick);
  </script>

<script>
  (function(){
    const s = document.getElementById('munchlaxSticker');
    if(!s) return;

    let down = false, offX = 0, offY = 0;

    s.addEventListener('pointerdown', (e) => {
      down = true;
      s.setPointerCapture(e.pointerId);
      const r = s.getBoundingClientRect();
      offX = e.clientX - r.left;
      offY = e.clientY - r.top;
      s.style.transition = 'none';
    });

    window.addEventListener('pointermove', (e) => {
      if(!down) return;
      // switch to left/top so we can drag anywhere
      s.style.right = 'auto';
      s.style.bottom = 'auto';

      let x = e.clientX - offX;
      let y = e.clientY - offY;

      // keep inside the viewport
      const maxX = window.innerWidth  - s.offsetWidth  - 4;
      const maxY = window.innerHeight - s.offsetHeight - 4;
      x = Math.max(4, Math.min(x, maxX));
      y = Math.max(4, Math.min(y, maxY));

      s.style.left = x + 'px';
      s.style.top  = y + 'px';
    });

    window.addEventListener('pointerup', () => {
      if(!down) return;
      down = false;
      s.style.transition = 'transform .2s ease';
    });
  })();
</script>


</body>
</html>
